{% comment %}
  SYNAPEX HERO VIDEO SECTION
  Maximum Strategic Flexibility Architecture
  Sovereign-Grade Control Over All Visual Elements
{% endcomment %}

{%- liquid
  assign video_url = section.settings.video_url
  assign fallback_image = section.settings.fallback_image
  assign heading = section.settings.heading
  assign subheading = section.settings.subheading
  assign content_position = section.settings.content_position
  assign button_label = section.settings.button_label
  assign button_link = section.settings.button_link
  assign section_height = section.settings.section_height
  assign overlay_opacity = section.settings.overlay_opacity
  assign text_color = section.settings.text_color
  assign button_style = section.settings.button_style
-%}

<section 
  class="synapex-hero-video" 
  data-section-id="{{ section.id }}"
  style="--overlay-opacity: {{ overlay_opacity }}%; --text-color: {{ text_color }};"
>
  <div class="hero-video__container hero-video--{{ section_height }}">
    
    {%- comment -%} VIDEO BACKGROUND LAYER {%- endcomment -%}
    <div class="hero-video__background">
      {% if video_url != blank %}
        <video 
          class="hero-video__video"
          autoplay 
          loop 
          muted 
          playsinline
          {% if fallback_image %}
            poster="{{ fallback_image | image_url: width: 1920 }}"
          {% endif %}
        >
          <source src="{{ video_url }}" type="video/mp4">
          {%- comment -%} Fallback for browsers that don't support video {%- endcomment -%}
          {% if fallback_image %}
            <img 
              src="{{ fallback_image | image_url: width: 1920 }}" 
              alt="{{ heading | escape }}"
              class="hero-video__fallback-image"
            >
          {% endif %}
        </video>
      {% elsif fallback_image %}
        <img 
          src="{{ fallback_image | image_url: width: 1920 }}" 
          alt="{{ heading | escape }}"
          class="hero-video__fallback-image"
        >
      {% endif %}
      
      {%- comment -%} DARK OVERLAY FOR TEXT CONTRAST {%- endcomment -%}
      <div class="hero-video__overlay"></div>
    </div>

    {%- comment -%} CONTENT OVERLAY LAYER {%- endcomment -%}
    <div class="hero-video__content content-position--{{ content_position }}">
      <div class="hero-content__wrapper">
        {% if heading != blank %}
          <h1 class="hero-content__heading">
            {{ heading }}
          </h1>
        {% endif %}

        {% if subheading != blank %}
          <p class="hero-content__subheading">
            {{ subheading }}
          </p>
        {% endif %}

        {% if button_label != blank and button_link != blank %}
          <a 
            href="{{ button_link }}" 
            class="hero-content__button hero-button--{{ button_style }}"
          >
            {{ button_label }}
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<style>
  /* ============================================
     SYNAPEX HERO VIDEO - BASE ARCHITECTURE
     ============================================ */
  .synapex-hero-video {
    position: relative;
    width: 100%;
    overflow: hidden;
  }

  .hero-video__container {
    position: relative;
    width: 100%;
    display: grid;
    place-items: center;
  }

  /* Height Variants */
  .hero-video--compact {
    min-height: 400px;
    height: 50vh;
  }

  .hero-video--standard {
    min-height: 500px;
    height: 70vh;
  }

  .hero-video--full {
    min-height: 600px;
    height: 100vh;
  }

  /* ============================================
     VIDEO BACKGROUND LAYER
     HARDENED: Video forced to absolute bottom of stacking context
     ============================================ */
  .hero-video__background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    overflow: hidden;
  }

  .hero-video__video,
  .hero-video__fallback-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -1;
  }

  /* Hide video on mobile to save bandwidth */
  @media (max-width: 768px) {
    .hero-video__video {
      display: none;
    }
  }

  /* Dark overlay for text contrast */
  .hero-video__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, calc(var(--overlay-opacity) / 100));
    z-index: 1;
    pointer-events: none;
  }

  /* ============================================
     CONTENT OVERLAY LAYER
     HARDENED: Content guaranteed to render above all background layers
     ============================================ */
  .hero-video__content {
    position: relative;
    z-index: 100;
    width: 100%;
    height: 100%;
    display: flex;
    padding: 2rem;
  }

  .hero-content__wrapper {
    max-width: 800px;
    text-align: center;
  }

  /* ============================================
     CONTENT POSITIONING - 9 QUADRANT SYSTEM
     ============================================ */
  
  /* TOP ROW */
  .content-position--top-left {
    justify-content: flex-start;
    align-items: flex-start;
  }

  .content-position--top-left .hero-content__wrapper {
    text-align: left;
  }

  .content-position--top-center {
    justify-content: center;
    align-items: flex-start;
  }

  .content-position--top-right {
    justify-content: flex-end;
    align-items: flex-start;
  }

  .content-position--top-right .hero-content__wrapper {
    text-align: right;
  }

  /* MIDDLE ROW */
  .content-position--middle-left {
    justify-content: flex-start;
    align-items: center;
  }

  .content-position--middle-left .hero-content__wrapper {
    text-align: left;
  }

  .content-position--center {
    justify-content: center;
    align-items: center;
  }

  .content-position--middle-right {
    justify-content: flex-end;
    align-items: center;
  }

  .content-position--middle-right .hero-content__wrapper {
    text-align: right;
  }

  /* BOTTOM ROW */
  .content-position--bottom-left {
    justify-content: flex-start;
    align-items: flex-end;
  }

  .content-position--bottom-left .hero-content__wrapper {
    text-align: left;
  }

  .content-position--bottom-center {
    justify-content: center;
    align-items: flex-end;
  }

  .content-position--bottom-right {
    justify-content: flex-end;
    align-items: flex-end;
  }

  .content-position--bottom-right .hero-content__wrapper {
    text-align: right;
  }

  /* ============================================
     TEXT STYLING
     ============================================ */
  .hero-content__heading {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    font-size: clamp(2rem, 5vw, 4rem);
    font-weight: 900;
    color: var(--text-color);
    line-height: 1.1;
    margin: 0 0 1rem 0;
    letter-spacing: -0.02em;
    text-transform: uppercase;
  }

  .hero-content__subheading {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    font-size: clamp(1rem, 2vw, 1.5rem);
    font-weight: 400;
    color: var(--text-color);
    line-height: 1.5;
    margin: 0 0 2rem 0;
    opacity: 0.9;
  }

  /* ============================================
     BUTTON STYLING - THREE VARIANTS
     ============================================ */
  .hero-content__button {
    display: inline-block;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    font-size: 1rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 1rem 2.5rem;
    border-radius: 4px;
    text-decoration: none;
    transition: transform 0.2s ease-out, box-shadow 0.2s ease-out, filter 0.2s ease-out;
    cursor: pointer;
  }

  /* Primary Button - White */
  .hero-button--primary {
    background-color: #FFFFFF;
    color: #000000;
    border: 2px solid #FFFFFF;
  }

  .hero-button--primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 7px 15px rgba(255, 255, 255, 0.35);
  }

  .hero-button--primary:active {
    transform: translateY(0);
    filter: brightness(0.9);
  }

  /* Secondary Button - Outline */
  .hero-button--secondary {
    background-color: transparent;
    color: #FFFFFF;
    border: 2px solid #FFFFFF;
  }

  .hero-button--secondary:hover {
    background-color: #FFFFFF;
    color: #000000;
    transform: translateY(-2px);
  }

  .hero-button--secondary:active {
    transform: translateY(0);
  }

  /* Minimal Button - Text Only */
  .hero-button--minimal {
    background-color: transparent;
    color: #FFFFFF;
    border: none;
    padding: 1rem 1.5rem;
    text-decoration: underline;
    text-underline-offset: 4px;
  }

  .hero-button--minimal:hover {
    opacity: 0.8;
  }

  /* ============================================
     RESPONSIVE ADJUSTMENTS
     ============================================ */
  @media (max-width: 768px) {
    .hero-video__content {
      padding: 1.5rem;
    }

    .hero-content__heading {
      font-size: clamp(1.75rem, 8vw, 2.5rem);
      margin-bottom: 0.75rem;
    }

    .hero-content__subheading {
      font-size: clamp(0.875rem, 4vw, 1.125rem);
      margin-bottom: 1.5rem;
    }

    .hero-content__button {
      font-size: 0.875rem;
      padding: 0.875rem 2rem;
    }

    /* Force center alignment on mobile for better readability */
    .hero-video__content {
      justify-content: center !important;
      align-items: center !important;
    }

    .hero-content__wrapper {
      text-align: center !important;
    }
  }

  @media (max-width: 480px) {
    .hero-video__content {
      padding: 1rem;
    }

    .hero-content__heading {
      font-size: 1.5rem;
    }

    .hero-content__subheading {
      font-size: 0.875rem;
    }

    .hero-content__button {
      font-size: 0.75rem;
      padding: 0.75rem 1.5rem;
    }
  }

  /* ============================================
     ACCESSIBILITY
     ============================================ */
  @media (prefers-reduced-motion: reduce) {
    .hero-video__video {
      display: none;
    }

    .hero-content__button {
      transition: none;
    }
  }
</style>

{% schema %}
{
  "name": "Synapex Hero Video",
  "tag": "section",
  "class": "synapex-hero-section",
  "settings": [
    {
      "type": "header",
      "content": "Media Configuration"
    },
    {
      "type": "video_url",
      "id": "video_url",
      "label": "Video URL",
      "accept": [
        "youtube",
        "vimeo"
      ],
      "info": "Upload a video to Shopify Files or use YouTube/Vimeo URL. Video will be hidden on mobile to save bandwidth."
    },
    {
      "type": "image_picker",
      "id": "fallback_image",
      "label": "Fallback Image",
      "info": "Displayed on mobile devices and while video is loading. Required for optimal experience."
    },
    {
      "type": "header",
      "content": "Visual Controls"
    },
    {
      "type": "select",
      "id": "section_height",
      "label": "Section Height",
      "options": [
        {
          "value": "compact",
          "label": "Compact (50vh)"
        },
        {
          "value": "standard",
          "label": "Standard (70vh)"
        },
        {
          "value": "full",
          "label": "Full Screen (100vh)"
        }
      ],
      "default": "full"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Dark Overlay Opacity",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "%",
      "default": 40,
      "info": "Darkens video for better text contrast"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "header",
      "content": "Content Payload"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "FORGE YOUR STANDARD"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Synapex Performance Tape. Built for the uncompromising."
    },
    {
      "type": "header",
      "content": "Engagement Controls"
    },
    {
      "type": "select",
      "id": "content_position",
      "label": "Content Position",
      "options": [
        {
          "value": "top-left",
          "label": "Top Left"
        },
        {
          "value": "top-center",
          "label": "Top Center"
        },
        {
          "value": "top-right",
          "label": "Top Right"
        },
        {
          "value": "middle-left",
          "label": "Middle Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "middle-right",
          "label": "Middle Right"
        },
        {
          "value": "bottom-left",
          "label": "Bottom Left"
        },
        {
          "value": "bottom-center",
          "label": "Bottom Center"
        },
        {
          "value": "bottom-right",
          "label": "Bottom Right"
        }
      ],
      "default": "center",
      "info": "Precise quadrant positioning for content overlay"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "SHOP NOW"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button Style",
      "options": [
        {
          "value": "primary",
          "label": "Primary (Solid White)"
        },
        {
          "value": "secondary",
          "label": "Secondary (Outline)"
        },
        {
          "value": "minimal",
          "label": "Minimal (Text Only)"
        }
      ],
      "default": "primary"
    }
  ],
  "presets": [
    {
      "name": "Synapex Hero Video"
    }
  ]
}
{% endschema %}

