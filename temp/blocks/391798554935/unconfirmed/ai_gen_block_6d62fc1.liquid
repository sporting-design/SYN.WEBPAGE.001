{% doc %}
  @prompt
    Create an FAQ accordion section for a B2B wholesale landing page.
    
    STYLE: Brutalist design, black background (#000000), beige accent (#E3DAC9), white text for questions, gray text (#888) for answers, dark borders (#222).
    
    LAYOUT: Section heading "PARTNER FAQS" (centered, uppercase, bold, white). FAQ items stack vertically with borders between. Each FAQ has clickable question (bold, white, 1.3rem font) with + icon on right (beige). When clicked, answer expands below (gray text, 1rem). Plus icon rotates 45Â° to X when open. Smooth expand/collapse animation.
    
    FAQ ITEMS:
    
    Q: What's the minimum order requirement?
    A: No minimum order. Most partners start with 10-20 rolls to test patient response, then scale to monthly bulk orders. We ship within 48 hours of order placement.
    
    Q: How does pricing work at scale?
    A: Standard wholesale: $7.50/roll. Volume partners (100+ rolls/month) unlock $6.80/roll pricing. We provide tiered pricing documentation after approval.
    
    Q: Can we white-label or rebrand?
    A: Not currently. Our double-stripe design and branding are core to the product identity. However, we provide co-branded marketing materials for your clinic.
    
    Q: What if patients prefer their current tape brand?
    A: We offer sample packs for clinics to trial with patients. 87% of clinics report patient preference switches to Synapex after one application due to superior adhesion and comfort.
    
    Q: Is there an exclusivity requirement?
    A: No. You can carry multiple tape brands. We simply ask that Synapex be positioned as your premium offering due to its clinical-grade specifications.
    
    Q: What are the payment terms?
    A: Net-30 terms available for approved partners with established credit. New partners start with card/ACH payment, then qualify for terms after 90 days.
    
    Make all text editable, add/remove FAQ capability, responsive, 100px padding, clickable accordion functionality. Name: "B2B FAQ Accordion"
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-b2b-faq-{{ ai_gen_id }} {
    background-color: {{ block.settings.background_color }};
    padding: {{ block.settings.section_padding }}px 20px;
  }

  .ai-b2b-faq-container-{{ ai_gen_id }} {
    max-width: 900px;
    margin: 0 auto;
  }

  .ai-b2b-faq-heading-{{ ai_gen_id }} {
    text-align: center;
    color: {{ block.settings.heading_color }};
    font-size: {{ block.settings.heading_size }}px;
    font-weight: 700;
    text-transform: uppercase;
    margin: 0 0 60px 0;
    letter-spacing: 2px;
  }

  .ai-b2b-faq-item-{{ ai_gen_id }} {
    border-bottom: 1px solid {{ block.settings.border_color }};
  }

  .ai-b2b-faq-item-{{ ai_gen_id }}:first-child {
    border-top: 1px solid {{ block.settings.border_color }};
  }

  .ai-b2b-faq-question-{{ ai_gen_id }} {
    width: 100%;
    background: none;
    border: none;
    padding: 24px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    text-align: left;
    gap: 20px;
  }

  .ai-b2b-faq-question-text-{{ ai_gen_id }} {
    color: {{ block.settings.question_color }};
    font-size: {{ block.settings.question_size }}px;
    font-weight: 700;
    line-height: 1.4;
    margin: 0;
  }

  .ai-b2b-faq-icon-{{ ai_gen_id }} {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    position: relative;
    transition: transform 0.3s ease;
  }

  .ai-b2b-faq-icon-{{ ai_gen_id }}::before,
  .ai-b2b-faq-icon-{{ ai_gen_id }}::after {
    content: '';
    position: absolute;
    background-color: {{ block.settings.icon_color }};
    transition: transform 0.3s ease;
  }

  .ai-b2b-faq-icon-{{ ai_gen_id }}::before {
    width: 24px;
    height: 2px;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
  }

  .ai-b2b-faq-icon-{{ ai_gen_id }}::after {
    width: 2px;
    height: 24px;
    left: 50%;
    top: 0;
    transform: translateX(-50%);
  }

  .ai-b2b-faq-item-{{ ai_gen_id }}.active .ai-b2b-faq-icon-{{ ai_gen_id }} {
    transform: rotate(45deg);
  }

  .ai-b2b-faq-answer-wrapper-{{ ai_gen_id }} {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
  }

  .ai-b2b-faq-answer-{{ ai_gen_id }} {
    color: {{ block.settings.answer_color }};
    font-size: {{ block.settings.answer_size }}px;
    line-height: 1.6;
    padding: 0 0 24px 0;
    margin: 0;
  }

  @media screen and (max-width: 749px) {
    .ai-b2b-faq-heading-{{ ai_gen_id }} {
      font-size: calc({{ block.settings.heading_size }}px * 0.7);
      margin-bottom: 40px;
    }

    .ai-b2b-faq-question-text-{{ ai_gen_id }} {
      font-size: calc({{ block.settings.question_size }}px * 0.85);
    }

    .ai-b2b-faq-answer-{{ ai_gen_id }} {
      font-size: calc({{ block.settings.answer_size }}px * 0.9);
    }

    .ai-b2b-faq-question-{{ ai_gen_id }} {
      padding: 20px 0;
    }

    .ai-b2b-faq-answer-{{ ai_gen_id }} {
      padding-bottom: 20px;
    }
  }
{% endstyle %}

<b2b-faq-accordion-{{ ai_gen_id }} class="ai-b2b-faq-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-b2b-faq-container-{{ ai_gen_id }}">
    {% if block.settings.heading != blank %}
      <h2 class="ai-b2b-faq-heading-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
    {% endif %}

    <div class="ai-b2b-faq-list-{{ ai_gen_id }}">
      {% for i in (1..6) %}
        {% liquid
          assign question_key = 'question_' | append: i
          assign answer_key = 'answer_' | append: i
          assign question = block.settings[question_key]
          assign answer = block.settings[answer_key]
        %}

        {% if question != blank and answer != blank %}
          <div class="ai-b2b-faq-item-{{ ai_gen_id }}" data-faq-item>
            <button
              class="ai-b2b-faq-question-{{ ai_gen_id }}"
              aria-expanded="false"
              data-faq-button
            >
              <h3 class="ai-b2b-faq-question-text-{{ ai_gen_id }}">
                {{ question }}
              </h3>
              <span class="ai-b2b-faq-icon-{{ ai_gen_id }}" aria-hidden="true"></span>
            </button>
            <div class="ai-b2b-faq-answer-wrapper-{{ ai_gen_id }}" data-faq-answer>
              <p class="ai-b2b-faq-answer-{{ ai_gen_id }}">
                {{ answer }}
              </p>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</b2b-faq-accordion-{{ ai_gen_id }}>

<script>
  (function() {
    class B2bFaqAccordion{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.items = this.querySelectorAll('[data-faq-item]');
        this.setupEventListeners();
      }

      setupEventListeners() {
        this.items.forEach((item) => {
          const button = item.querySelector('[data-faq-button]');
          const answerWrapper = item.querySelector('[data-faq-answer]');
          const answer = answerWrapper.querySelector('.ai-b2b-faq-answer-{{ ai_gen_id }}');

          button.addEventListener('click', () => {
            const isActive = item.classList.contains('active');

            this.items.forEach((otherItem) => {
              if (otherItem !== item) {
                otherItem.classList.remove('active');
                const otherButton = otherItem.querySelector('[data-faq-button]');
                const otherWrapper = otherItem.querySelector('[data-faq-answer]');
                otherButton.setAttribute('aria-expanded', 'false');
                otherWrapper.style.maxHeight = '0';
              }
            });

            if (isActive) {
              item.classList.remove('active');
              button.setAttribute('aria-expanded', 'false');
              answerWrapper.style.maxHeight = '0';
            } else {
              item.classList.add('active');
              button.setAttribute('aria-expanded', 'true');
              answerWrapper.style.maxHeight = answer.scrollHeight + 'px';
            }
          });
        });
      }
    }

    customElements.define('b2b-faq-accordion-{{ ai_gen_id }}', B2bFaqAccordion{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "B2B FAQ Accordion",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Section"
    },
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "PARTNER FAQS"
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Section padding",
      "default": 100
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "question_color",
      "label": "Question",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "answer_color",
      "label": "Answer",
      "default": "#888888"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon",
      "default": "#E3DAC9"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border",
      "default": "#222222"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 16,
      "max": 72,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 32
    },
    {
      "type": "range",
      "id": "question_size",
      "min": 14,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Question size",
      "default": 20
    },
    {
      "type": "range",
      "id": "answer_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Answer size",
      "default": 16
    },
    {
      "type": "header",
      "content": "FAQ 1"
    },
    {
      "type": "text",
      "id": "question_1",
      "label": "Question",
      "default": "What's the minimum order requirement?"
    },
    {
      "type": "textarea",
      "id": "answer_1",
      "label": "Answer",
      "default": "No minimum order. Most partners start with 10-20 rolls to test patient response, then scale to monthly bulk orders. We ship within 48 hours of order placement."
    },
    {
      "type": "header",
      "content": "FAQ 2"
    },
    {
      "type": "text",
      "id": "question_2",
      "label": "Question",
      "default": "How does pricing work at scale?"
    },
    {
      "type": "textarea",
      "id": "answer_2",
      "label": "Answer",
      "default": "Standard wholesale: $7.50/roll. Volume partners (100+ rolls/month) unlock $6.80/roll pricing. We provide tiered pricing documentation after approval."
    },
    {
      "type": "header",
      "content": "FAQ 3"
    },
    {
      "type": "text",
      "id": "question_3",
      "label": "Question",
      "default": "Can we white-label or rebrand?"
    },
    {
      "type": "textarea",
      "id": "answer_3",
      "label": "Answer",
      "default": "Not currently. Our double-stripe design and branding are core to the product identity. However, we provide co-branded marketing materials for your clinic."
    },
    {
      "type": "header",
      "content": "FAQ 4"
    },
    {
      "type": "text",
      "id": "question_4",
      "label": "Question",
      "default": "What if patients prefer their current tape brand?"
    },
    {
      "type": "textarea",
      "id": "answer_4",
      "label": "Answer",
      "default": "We offer sample packs for clinics to trial with patients. 87% of clinics report patient preference switches to Synapex after one application due to superior adhesion and comfort."
    },
    {
      "type": "header",
      "content": "FAQ 5"
    },
    {
      "type": "text",
      "id": "question_5",
      "label": "Question",
      "default": "Is there an exclusivity requirement?"
    },
    {
      "type": "textarea",
      "id": "answer_5",
      "label": "Answer",
      "default": "No. You can carry multiple tape brands. We simply ask that Synapex be positioned as your premium offering due to its clinical-grade specifications."
    },
    {
      "type": "header",
      "content": "FAQ 6"
    },
    {
      "type": "text",
      "id": "question_6",
      "label": "Question",
      "default": "What are the payment terms?"
    },
    {
      "type": "textarea",
      "id": "answer_6",
      "label": "Answer",
      "default": "Net-30 terms available for approved partners with established credit. New partners start with card/ACH payment, then qualify for terms after 90 days."
    }
  ],
  "presets": [
    {
      "name": "B2B FAQ Accordion"
    }
  ]
}
{% endschema %}